# ğŸš€ Stur-vey ë°°í¬ ê°€ì´ë“œ

## ëª©ì°¨
1. [ë°°í¬ ì „ ì¤€ë¹„ì‚¬í•­](#ë°°í¬-ì „-ì¤€ë¹„ì‚¬í•­)
2. [Vercel ë°°í¬](#vercel-ë°°í¬)
3. [Supabase ì„¤ì •](#supabase-ì„¤ì •)
4. [ë°°í¬ í›„ í™•ì¸ì‚¬í•­](#ë°°í¬-í›„-í™•ì¸ì‚¬í•­)
5. [íŠ¸ëŸ¬ë¸”ìŠˆíŒ…](#íŠ¸ëŸ¬ë¸”ìŠˆíŒ…)

---

## ë°°í¬ ì „ ì¤€ë¹„ì‚¬í•­

### 1. ë¡œì»¬ ë¹Œë“œ í…ŒìŠ¤íŠ¸
```bash
# í”„ë¡œë•ì…˜ ë¹Œë“œ í…ŒìŠ¤íŠ¸
npm run build

# ë¹Œë“œ ê²°ê³¼ ì‹¤í–‰ í…ŒìŠ¤íŠ¸
npm start
```

ë¹Œë“œê°€ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ê³  ì—ëŸ¬ê°€ ì—†ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.

### 2. í™˜ê²½ ë³€ìˆ˜ í™•ì¸
`.env.local` íŒŒì¼ì— ë‹¤ìŒ ë³€ìˆ˜ë“¤ì´ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸:

```env
NEXT_PUBLIC_SUPABASE_URL=your-supabase-project-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key
```

> âš ï¸ **ì¤‘ìš”**: `.env.local` íŒŒì¼ì€ Gitì— ì»¤ë°‹í•˜ì§€ ë§ˆì„¸ìš”! (`.gitignore`ì— í¬í•¨ë˜ì–´ ìˆìŒ)

### 3. Git ì €ì¥ì†Œ ì¤€ë¹„
```bash
# Git ì´ˆê¸°í™” (ì•„ì§ ì•ˆí–ˆë‹¤ë©´)
git init

# ë³€ê²½ì‚¬í•­ ì»¤ë°‹
git add .
git commit -m "Ready for deployment"

# GitHubì— í‘¸ì‹œ (ì„ íƒì‚¬í•­)
git remote add origin https://github.com/your-username/stur-vey.git
git branch -M main
git push -u origin main
```

---

## Vercel ë°°í¬

### ë°©ë²• 1: Vercel CLI ì‚¬ìš© (ê¶Œì¥)

#### 1ë‹¨ê³„: Vercel CLI ì„¤ì¹˜
```bash
npm i -g vercel
```

#### 2ë‹¨ê³„: Vercel ë¡œê·¸ì¸
```bash
vercel login
```

ë¸Œë¼ìš°ì €ê°€ ì—´ë¦¬ë©´ GitHub, GitLab, ë˜ëŠ” ì´ë©”ì¼ë¡œ ë¡œê·¸ì¸í•˜ì„¸ìš”.

#### 3ë‹¨ê³„: í”„ë¡œì íŠ¸ ë°°í¬
```bash
# ê°œë°œ/í”„ë¦¬ë·° ë°°í¬
vercel

# í”„ë¡œë•ì…˜ ë°°í¬
vercel --prod
```

#### 4ë‹¨ê³„: í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
Vercel CLIë¥¼ í†µí•´ í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€:

```bash
vercel env add NEXT_PUBLIC_SUPABASE_URL
# ê°’ ì…ë ¥: https://your-project.supabase.co

vercel env add NEXT_PUBLIC_SUPABASE_ANON_KEY
# ê°’ ì…ë ¥: your-anon-key
```

ë˜ëŠ” Vercel Dashboardì—ì„œ ì„¤ì •:
1. í”„ë¡œì íŠ¸ ì„ íƒ
2. Settings â†’ Environment Variables
3. í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€

### ë°©ë²• 2: Vercel Dashboard ì‚¬ìš©

#### 1ë‹¨ê³„: Vercel ê°€ì… ë° ë¡œê·¸ì¸
- [vercel.com](https://vercel.com) ì ‘ì†
- GitHub ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸

#### 2ë‹¨ê³„: ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±
1. "Add New..." â†’ "Project" í´ë¦­
2. GitHub ì €ì¥ì†Œ ì—°ê²°
3. `stur-vey` ì €ì¥ì†Œ ì„ íƒ
4. "Import" í´ë¦­

#### 3ë‹¨ê³„: í”„ë¡œì íŠ¸ ì„¤ì •
- **Framework Preset**: Next.js (ìë™ ê°ì§€)
- **Root Directory**: `./` (ê¸°ë³¸ê°’)
- **Build Command**: `npm run build` (ê¸°ë³¸ê°’)
- **Output Directory**: `.next` (ê¸°ë³¸ê°’)

#### 4ë‹¨ê³„: í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
"Environment Variables" ì„¹ì…˜ì—ì„œ:

| Name | Value |
|------|-------|
| `NEXT_PUBLIC_SUPABASE_URL` | `https://xxxxx.supabase.co` |
| `NEXT_PUBLIC_SUPABASE_ANON_KEY` | `eyJxxx...` |

**Environment**: Production, Preview, Development ëª¨ë‘ ì„ íƒ

#### 5ë‹¨ê³„: ë°°í¬ ì‹œì‘
"Deploy" ë²„íŠ¼ í´ë¦­

ë°°í¬ê°€ ì™„ë£Œë˜ë©´ URLì´ ìƒì„±ë©ë‹ˆë‹¤:
- í”„ë¡œë•ì…˜: `https://stur-vey.vercel.app`
- í”„ë¦¬ë·°: `https://stur-vey-git-branch-name.vercel.app`

---

## Supabase ì„¤ì •

### 1. Redirect URLs ì¶”ê°€
Supabase Dashboard â†’ Authentication â†’ URL Configuration

**Site URL** ì„¤ì •:
```
https://your-app.vercel.app
```

**Redirect URLs** ì¶”ê°€:
```
https://your-app.vercel.app/api/auth/callback
http://localhost:3000/api/auth/callback (ê°œë°œìš©)
```

### 2. OAuth Provider ì„¤ì •

#### Kakao ë¡œê·¸ì¸ ì„¤ì •
Supabase Dashboard â†’ Authentication â†’ Providers â†’ Kakao

1. **Enable** ì²´í¬
2. **Redirect URL** ë³µì‚¬:
   ```
   https://xxxxx.supabase.co/auth/v1/callback
   ```
3. Kakao Developers Consoleì—ì„œ:
   - ì•± ì„ íƒ â†’ ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ â†’ Redirect URIì— ìœ„ URL ì¶”ê°€
   - ë™ì˜í•­ëª©ì—ì„œ í•„ìš”í•œ ì •ë³´ ìˆ˜ì§‘ ì„¤ì •

#### Google ë¡œê·¸ì¸ ì„¤ì •
Supabase Dashboard â†’ Authentication â†’ Providers â†’ Google

1. **Enable** ì²´í¬
2. Google Cloud Consoleì—ì„œ:
   - OAuth 2.0 í´ë¼ì´ì–¸íŠ¸ ID ìƒì„±
   - ìŠ¹ì¸ëœ ë¦¬ë””ë ‰ì…˜ URIì— Supabase Redirect URL ì¶”ê°€
3. Client IDì™€ Client Secretì„ Supabaseì— ì…ë ¥

### 3. Row Level Security (RLS) ì •ì±… í™•ì¸

ë‹¤ìŒ í…Œì´ë¸”ì˜ RLS ì •ì±…ì´ ì˜¬ë°”ë¥´ê²Œ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸:

- **profiles**: ì‚¬ìš©ì ë³¸ì¸ë§Œ ìˆ˜ì • ê°€ëŠ¥
- **surveys**: ì‘ì„±ìë§Œ ìˆ˜ì •/ì‚­ì œ ê°€ëŠ¥
- **questions**: ì„¤ë¬¸ ì‘ì„±ìë§Œ ìˆ˜ì • ê°€ëŠ¥
- **responses**: ë³¸ì¸ ì‘ë‹µë§Œ ì¡°íšŒ ê°€ëŠ¥
- **answers**: ë³¸ì¸ ë‹µë³€ë§Œ ì¡°íšŒ ê°€ëŠ¥

---

## ë°°í¬ í›„ í™•ì¸ì‚¬í•­

### 1. ê¸°ë³¸ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

#### íšŒì›ê°€ì…/ë¡œê·¸ì¸
- [ ] ì´ë©”ì¼ íšŒì›ê°€ì… â†’ ì¸ì¦ ì´ë©”ì¼ ìˆ˜ì‹ 
- [ ] ì´ë©”ì¼ ë¡œê·¸ì¸
- [ ] ì¹´ì¹´ì˜¤ ì†Œì…œ ë¡œê·¸ì¸
- [ ] Google ì†Œì…œ ë¡œê·¸ì¸
- [ ] ë¡œê·¸ì•„ì›ƒ

#### ì„¤ë¬¸ ìƒì„±
- [ ] ë¡œê·¸ì¸ í›„ "ì„¤ë¬¸ ë§Œë“¤ê¸°" ì ‘ê·¼
- [ ] ê° ì§ˆë¬¸ ìœ í˜• ì¶”ê°€ (ê°ê´€ì‹, ì£¼ê´€ì‹, ì²™ë„í˜•)
- [ ] ì„¤ë¬¸ ìƒì„± ì™„ë£Œ
- [ ] ìƒì„±ëœ ì„¤ë¬¸ ìƒì„¸ í˜ì´ì§€ í™•ì¸

#### ì„¤ë¬¸ ì‘ë‹µ
- [ ] ì„¤ë¬¸ ëª©ë¡ì—ì„œ ì„¤ë¬¸ ì„ íƒ
- [ ] í•„ìˆ˜ ì§ˆë¬¸ ê²€ì¦ í™•ì¸
- [ ] ì‘ë‹µ ì œì¶œ
- [ ] ì¤‘ë³µ ì‘ë‹µ ë°©ì§€ í™•ì¸

#### ê²°ê³¼ í™•ì¸
- [ ] ì„¤ë¬¸ ì‘ì„±ìë¡œ ê²°ê³¼ í˜ì´ì§€ ì ‘ê·¼
- [ ] í†µê³„ ê·¸ë˜í”„ í‘œì‹œ í™•ì¸
- [ ] ì£¼ê´€ì‹ ë‹µë³€ ëª©ë¡ í™•ì¸

#### ë§ˆì´í˜ì´ì§€
- [ ] í”„ë¡œí•„ ìˆ˜ì •
- [ ] ë‚´ê°€ ë§Œë“  ì„¤ë¬¸ ëª©ë¡
- [ ] ë‚´ê°€ ì‘ë‹µí•œ ì„¤ë¬¸ ëª©ë¡

#### ê´€ë¦¬ì ê¸°ëŠ¥ (roleì´ 'admin'ì¸ ê²½ìš°)
- [ ] ê´€ë¦¬ì í˜ì´ì§€ ì ‘ê·¼
- [ ] ì „ì²´ ì„¤ë¬¸ ì¡°íšŒ
- [ ] ì „ì²´ ì‚¬ìš©ì ì¡°íšŒ
- [ ] ì„¤ë¬¸ ì‚­ì œ ê¸°ëŠ¥
- [ ] ì‚¬ìš©ì ì—­í•  ë³€ê²½ ê¸°ëŠ¥

### 2. ì„±ëŠ¥ í™•ì¸
- [ ] Lighthouse ì ìˆ˜ í™•ì¸ (Performance, SEO, Accessibility)
- [ ] í˜ì´ì§€ ë¡œë”© ì†ë„ í™•ì¸
- [ ] ì´ë¯¸ì§€ ìµœì í™” í™•ì¸

### 3. ë°˜ì‘í˜• ë””ìì¸ í™•ì¸
- [ ] ëª¨ë°”ì¼ (375px~)
- [ ] íƒœë¸”ë¦¿ (768px~)
- [ ] ë°ìŠ¤í¬í†± (1024px~)

### 4. ë¸Œë¼ìš°ì € í˜¸í™˜ì„±
- [ ] Chrome
- [ ] Safari
- [ ] Firefox
- [ ] Edge

---

## ë„ë©”ì¸ ì—°ê²° (ì„ íƒì‚¬í•­)

### Vercelì—ì„œ ì»¤ìŠ¤í…€ ë„ë©”ì¸ ì„¤ì •

1. Vercel Dashboard â†’ í”„ë¡œì íŠ¸ ì„ íƒ
2. Settings â†’ Domains
3. "Add" í´ë¦­í•˜ì—¬ ë„ë©”ì¸ ì…ë ¥
4. DNS ì„¤ì • ì§€ì¹¨ì— ë”°ë¼ ë„ë©”ì¸ ì œê³µì—…ì²´ì—ì„œ ì„¤ì •

**DNS ë ˆì½”ë“œ ì˜ˆì‹œ:**
```
Type: CNAME
Name: www
Value: cname.vercel-dns.com
```

ë˜ëŠ”

```
Type: A
Name: @
Value: 76.76.21.21
```

---

## íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ë¬¸ì œ 1: í™˜ê²½ ë³€ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ
**ì¦ìƒ**: `undefined` ë˜ëŠ” Supabase ì—°ê²° ì‹¤íŒ¨

**í•´ê²°**:
1. Vercel Dashboard â†’ Settings â†’ Environment Variables í™•ì¸
2. ë³€ìˆ˜ ì´ë¦„ì´ ì •í™•í•œì§€ í™•ì¸ (`NEXT_PUBLIC_` ì ‘ë‘ì‚¬ í¬í•¨)
3. ì¬ë°°í¬: `vercel --prod --force`

### ë¬¸ì œ 2: OAuth ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‹¤íŒ¨
**ì¦ìƒ**: ì†Œì…œ ë¡œê·¸ì¸ í›„ ì—ëŸ¬ í˜ì´ì§€

**í•´ê²°**:
1. Supabase Dashboardì—ì„œ Redirect URLs í™•ì¸
2. OAuth Provider ì½˜ì†”ì—ì„œ Redirect URI í™•ì¸
3. URLì´ ì •í™•íˆ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸ (http vs https, trailing slash)

### ë¬¸ì œ 3: ë¹Œë“œ ì‹¤íŒ¨
**ì¦ìƒ**: Vercel ë°°í¬ ì¤‘ ë¹Œë“œ ì—ëŸ¬

**í•´ê²°**:
```bash
# ë¡œì»¬ì—ì„œ ë¹Œë“œ í…ŒìŠ¤íŠ¸
npm run build

# ì—ëŸ¬ ë¡œê·¸ í™•ì¸
# package.jsonì˜ Node.js ë²„ì „ í™•ì¸
```

Vercel Settings â†’ General â†’ Node.js Version ì„¤ì • (18.x ê¶Œì¥)

### ë¬¸ì œ 4: í˜ì´ì§€ê°€ 404 ì—ëŸ¬
**ì¦ìƒ**: íŠ¹ì • í˜ì´ì§€ ì ‘ê·¼ ì‹œ 404

**í•´ê²°**:
1. Next.js App Router êµ¬ì¡° í™•ì¸
2. ë™ì  ë¼ìš°íŠ¸ `[id]` í´ë” êµ¬ì¡° í™•ì¸
3. `page.js` íŒŒì¼ ì¡´ì¬ ì—¬ë¶€ í™•ì¸

### ë¬¸ì œ 5: ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨
**ì¦ìƒ**: Supabase ì¿¼ë¦¬ ì‹¤íŒ¨

**í•´ê²°**:
1. Supabase í”„ë¡œì íŠ¸ ìƒíƒœ í™•ì¸ (paused ì—¬ë¶€)
2. RLS ì •ì±… í™•ì¸
3. API Key ìœ íš¨ì„± í™•ì¸

---

## ì„±ëŠ¥ ìµœì í™” íŒ

### 1. ì´ë¯¸ì§€ ìµœì í™”
```jsx
import Image from 'next/image';

<Image 
  src="/logo.png" 
  alt="Logo"
  width={200}
  height={200}
  priority // ì¤‘ìš”í•œ ì´ë¯¸ì§€
/>
```

### 2. ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…
```jsx
import dynamic from 'next/dynamic';

const HeavyComponent = dynamic(() => import('./HeavyComponent'), {
  loading: () => <LoadingSpinner />
});
```

### 3. ìºì‹± ì„¤ì •
```js
// next.config.mjs
export default {
  headers: async () => [
    {
      source: '/:all*(svg|jpg|png)',
      headers: [
        {
          key: 'Cache-Control',
          value: 'public, max-age=31536000, immutable',
        },
      ],
    },
  ],
};
```

---

## ëª¨ë‹ˆí„°ë§

### Vercel Analytics
1. Vercel Dashboard â†’ í”„ë¡œì íŠ¸ â†’ Analytics
2. í˜ì´ì§€ ë·°, ì‚¬ìš©ì ìˆ˜, ì„±ëŠ¥ ì§€í‘œ í™•ì¸

### Supabase Dashboard
1. Database â†’ Query Performance
2. Authentication â†’ Users í†µê³„
3. Storage â†’ Bandwidth ì‚¬ìš©ëŸ‰

---

## ì—…ë°ì´íŠ¸ ë°°í¬

### ì½”ë“œ ë³€ê²½ í›„ ì¬ë°°í¬

```bash
# ë³€ê²½ì‚¬í•­ ì»¤ë°‹
git add .
git commit -m "Update: feature description"

# GitHubì— í‘¸ì‹œ (Vercelì´ ìë™ ë°°í¬)
git push origin main

# ë˜ëŠ” Vercel CLIë¡œ ì§ì ‘ ë°°í¬
vercel --prod
```

---

## ë°±ì—… ë° ë³µêµ¬

### ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—…
SupabaseëŠ” ìë™ ë°±ì—…ì„ ì œê³µí•˜ì§€ë§Œ, ì¤‘ìš”í•œ ë°ì´í„°ëŠ” ë³„ë„ ë°±ì—… ê¶Œì¥:

```sql
-- SQL Editorì—ì„œ ì‹¤í–‰
COPY (SELECT * FROM surveys) TO STDOUT WITH CSV HEADER;
COPY (SELECT * FROM responses) TO STDOUT WITH CSV HEADER;
```

### í™˜ê²½ ë³€ìˆ˜ ë°±ì—…
`.env.example` íŒŒì¼ ìƒì„±:
```env
NEXT_PUBLIC_SUPABASE_URL=your-url-here
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-key-here
```

---

## ì¶”ê°€ ë¦¬ì†ŒìŠ¤

- [Next.js ë°°í¬ ë¬¸ì„œ](https://nextjs.org/docs/deployment)
- [Vercel ë¬¸ì„œ](https://vercel.com/docs)
- [Supabase ë¬¸ì„œ](https://supabase.com/docs)
- [í”„ë¡œì íŠ¸ GitHub](https://github.com/your-username/stur-vey)

---

## ë¬¸ì˜ ë° ì§€ì›

- ì´ë©”ì¼: contact@sturvey.com
- GitHub Issues: ë²„ê·¸ ë¦¬í¬íŠ¸ ë° ê¸°ëŠ¥ ì œì•ˆ
- ë¬¸ì„œ: `/docs` í´ë”ì˜ ë‹¤ë¥¸ ê°€ì´ë“œ ì°¸ì¡°

---

**ë°°í¬ ì„±ê³µì„ ê¸°ì›í•©ë‹ˆë‹¤! ğŸ‰**
